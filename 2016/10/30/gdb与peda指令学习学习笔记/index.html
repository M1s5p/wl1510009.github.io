<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Never underestimate your power to change yourself!">
    

    <!--Author-->
    
        <meta name="author" content="Mr_white">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="gdb与peda指令学习学习笔记"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="Never underestimate your power to change yourself!" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Mr_white"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>gdb与peda指令学习学习笔记 - Mr_white</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2016/10/30/gdb与peda指令学习学习笔记/">
                gdb与peda指令学习学习笔记
            </a>
        </h1>
        <div class="post-info">
            <span class="date">2016-10-30</span>
            <a href="#disqus_thread" class="comments">留言</a>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>下午学习的gdb指令。傻傻的对一个自己的程序输入打开指令打不开。问问才知道要先转换成可执行文件，上网有学学gcc指令收获不少啊。。<br><a id="more"></a></p>
<h2 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a><strong>遇到问题</strong></h2><h3 id="1、写了一个C-语言但是用指令转换成可执行文件时候呢显示iostream不存在"><a href="#1、写了一个C-语言但是用指令转换成可执行文件时候呢显示iostream不存在" class="headerlink" title="1、写了一个C++语言但是用指令转换成可执行文件时候呢显示iostream不存在"></a>1、写了一个C++语言但是用指令转换成可执行文件时候呢显示iostream不存在</h3><p>解决：对于C语言使用的转换指令是（假设文件是doc.c）<br>将C语言的文件doc.c转换为了doc</p>
<blockquote>
<p>gcc doc.c -o doc</p>
</blockquote>
<p>还有一个默认转换，也就是后面可以不加你转换的名字，系统默认转换后的名字为a.out</p>
<blockquote>
<p>gcc doc.c</p>
</blockquote>
<p>对于C++语言使用的转换指令是</p>
<blockquote>
<p>g++ doc.c -o doc</p>
</blockquote>
<h3 id="2、显示j-strlen-s-语句出错。"><a href="#2、显示j-strlen-s-语句出错。" class="headerlink" title="2、显示j=strlen(s)语句出错。"></a>2、显示j=strlen(s)语句出错。</h3><p>解决：原来linux的习惯，strlen声明放在 string.h 中(linux系统中可以通过man strlen来查看其帮助和所在头文件)，仅仅 #include <string> 只是引入了 std::string，还需要 #include <string.h></string.h></string></p>
<p>###3、其他指令<br>(1)、 将test.c预处理输出test.i文件。</p>
<blockquote>
<p>gcc -E test.c -o test.i</p>
</blockquote>
<p>(2)、 将预处理输出文件test.i汇编成test.s文件。</p>
<blockquote>
<p>gcc -E test.c -o test.i</p>
</blockquote>
<p>(3)、 将汇编输出文件test.s编译输出test.o文件。</p>
<blockquote>
<p>gcc -c test.s</p>
</blockquote>
<p>(4)、 将编译输出文件test.o链接成最终可执行文件test。</p>
<blockquote>
<p>gcc test.o -o test</p>
</blockquote>
<p>(5)、 使用编译优化级别1编译程序。级别为1~3，级别越大优化效果越好，但编译时间越长。</p>
<blockquote>
<p>gcc -O1 test.c -o test</p>
</blockquote>
<h3 id="4、多源文件的编译方法"><a href="#4、多源文件的编译方法" class="headerlink" title="4、多源文件的编译方法"></a>4、多源文件的编译方法</h3><p>(1)、多个文件一起编译<br>将testfun.c和test.c分别编译后链接成test可执行文件。</p>
<blockquote>
<p>gcc testfun.c test.c -o test</p>
</blockquote>
<p>(2)、分别编译各个源文件，之后对编译后输出的目标文件链接。<br>将testfun.c编译成testfun.o<br>将test.c编译成test.o<br>将testfun.o和test.o链接成test</p>
<blockquote>
<p>gcc -c testfun.c<br>gcc -c test.c<br>gcc -o testfun.o test.o -o test</p>
</blockquote>
<p>在搜索的过程中也发现了一个好玩的命令就先记录下吧，这是个gdb下的指令。</p>
<p>如果想看看现在的默认反汇编格式是什么，可以使用如下命令</p>
<blockquote>
<p>(gdb) show disassembly-flavor</p>
</blockquote>
<p>如果看不懂，那就转换汇编格式</p>
<blockquote>
<p>(gdb) set disassembly-flavor intel</p>
</blockquote>
<p>经过以上的步骤就可以把想要的可执行文件得到，下面就是对程序进行指令分析。程序为(doc)</p>
<p>运行程序看看</p>
<blockquote>
<p>./doc</p>
</blockquote>
<p>进入gdb指令下。（gdb + doc）<br>反编译</p>
<blockquote>
<p>disassemble main</p>
</blockquote>
<p>下面是基础的调试指令</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">介绍</th>
<th style="text-align:center">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">r 是run的简写，也就是在GDB下运行程序。（如果有设置断点会运行到断点）</td>
<td style="text-align:center">（gdb）r</td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:center">C是continue的简写，就是继执行被调试的程序，直到下一次断点处或者结束</td>
<td style="text-align:center">（gdb）c</td>
</tr>
<tr>
<td style="text-align:center">b &lt;行号&gt;/&lt;函数名称&gt;/<em>&lt;函数名称&gt;/</em>&lt;代码地址&gt;</td>
<td style="text-align:center">b 是breakpoint的简写，就是设置断点，可以使用行号，函数名，执行地址进行下断。而函数名前加一个*则表示将断点设置在“由编译器生成的prolog代码处”，者在了解汇编后可以理解。</td>
<td style="text-align:center">（gdb）b 8、（gdb）b main 、(gdb)b <em>main 、（gdb）b </em>0x8048534</td>
</tr>
<tr>
<td style="text-align:center">d [编号]</td>
<td style="text-align:center">d 是delete breakpoint的简写，就是删除制定编号后的断点，也可以一次删去所有断点。</td>
<td style="text-align:center">（gdb）d 2</td>
</tr>
<tr>
<td style="text-align:center">p &lt;变量名称&gt;</td>
<td style="text-align:center">P是print的简写，显示指定变量的值（临时变量或全局变量）。</td>
<td style="text-align:center">（print）p n</td>
</tr>
<tr>
<td style="text-align:center">q</td>
<td style="text-align:center">不需要多解释了，就是退出调试</td>
<td style="text-align:center">（gdb）q</td>
</tr>
<tr>
<td style="text-align:center">S</td>
<td style="text-align:center">执行一行源代码，如果此行代码有函数调用，进入该函数，也就相当于其他调试器的单步步入。</td>
<td style="text-align:center">（gdb）s</td>
</tr>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">执行一段源代码，代码中的函数调用也一并执行，也就相当于其他调试器的单步步过。</td>
<td style="text-align:center">（gdb）n</td>
</tr>
<tr>
<td style="text-align:center">Si ,ni</td>
<td style="text-align:center">这两个对应着的是s和n。不同的是这两个是对汇编语言的，而前两个是对源代码的。</td>
<td style="text-align:center">（gdb）si、（gdb）ni</td>
</tr>
</tbody>
</table>
<p>然后是peda的一些指令</p>
<blockquote>
<p>checksec –检查二进制的各种安全选项<br>dumpargs –当在调用指令时停止显示参数传递给函数<br>elfheader–调试文件的标题指令<br>elfsymbol–从一个精灵文件获得非调试符号信息<br>lookup   –搜索所有的地址/参考地址属于一个内存范围<br>readelf –从一个逆向文件获取标题信息<br>patch –内存补丁开始在字符串/ hexstring /诠释一个地址（？）<br>pattern –生成、搜索或写一个循环模式到内存<br>pshow –显示各种PEDA选项和其他设置<br>pset –设置各种peda选项和其他设置<br>procinfo –显示从/ proc / PID的各种信息<br>shellcode –生成或下载常见shellcodes<br>xormem –一个密钥异或内存区<br>vmmap –在调试过程中获得部分（S）的虚拟映射地址范围<br>ropgadget–得到的二进制或静态库共同ROP小工具<br>ropsearch –记忆中搜索rop小工具使用<br>skeleton –Python开发代码生成模板<br>dumprop –丢弃在特定的内存范围内所有ROP小工具<br>searchmem|find –在记忆中搜索模式；支持正则表达式搜索</p>
</blockquote>
<p>指令中提到了一个ROP，也不知道是啥，去搜一搜，原来：<br>ROP的全称为Return-oriented programming（返回导向编程），这是一种高级的内存攻击技术可以用来绕过现代操作系统的各种通用防御（比如内存不可执行和代码签名等）</p>
<p>这个溢出攻击可参照网址：<a href="http://www.programlife.net/linux-rop-stack-overflow.html" target="_blank" rel="external">http://www.programlife.net/linux-rop-stack-overflow.html</a></p>

    </div>

    

    

    <!-- Comments -->
    
    <div class="comments">
        


    </div>
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/02/12/practice-5之万能断点/">practice 5之万能断点</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/12/practice-4之IDA用法/">practice 4</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/10/practice-3之pyo学习/">practice-3</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/02/10/practice-2之汇编/">practice-2</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="282324364@qq.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>